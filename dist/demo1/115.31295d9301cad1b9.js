"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[115],{6115:(E,u,r)=>{r.r(u),r.d(u,{PermissionModule:()=>k});var d=r(6814),l=r(6223),f=r(7304),c=r(1274),g=r(5722),_=r(4955),v=r(9155),e=r(5879),h=r(6676),C=r.n(h),b=r(6910),x=r(431),T=r(8704);const Z=["noticeSwal"];function A(s,m){1&s&&(e.TgZ(0,"div"),e._uU(1,"Permission name is required"),e.qZA())}function y(s,m){1&s&&(e.TgZ(0,"div"),e._uU(1,"Permission name must be at least 4 characters long"),e.qZA())}function M(s,m){if(1&s&&(e.TgZ(0,"div",37),e.YNc(1,A,2,0,"div",38),e.YNc(2,y,2,0,"div",38),e.qZA()),2&s){e.oxw();const t=e.MAs(18);e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.minlength)}}const P=function(s){return{"ki-up":s}};function w(s,m){if(1&s){const t=e.EpF();e.TgZ(0,"form",14,15),e.NdJ("ngSubmit",function(n){e.CHM(t);const o=e.MAs(1),a=e.oxw();return e.KtG(a.onSubmit(n,o))}),e.TgZ(2,"div",16)(3,"h4",17),e._uU(4,"Permission Details"),e.qZA(),e.TgZ(5,"button",18),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("Cross click"))}),e.qZA()(),e.TgZ(6,"div",19)(7,"div",20)(8,"div",21),e.NdJ("click",function(){e.CHM(t);const n=e.MAs(13);return e.KtG(n.toggle())}),e._uU(9,"User Information "),e.TgZ(10,"span",22),e._UZ(11,"i",23),e.qZA()(),e.TgZ(12,"div",24,25),e.NdJ("ngbCollapseChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.isCollapsed1=n)}),e.TgZ(14,"div",26)(15,"label",27),e._uU(16,"Name"),e.qZA(),e.TgZ(17,"input",28,29),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.permissionModel.name=n)}),e.qZA(),e.YNc(19,M,3,2,"div",30),e.qZA()()()(),e.TgZ(20,"div",31)(21,"button",32),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("cancel"))}),e._uU(22," Discard "),e.qZA(),e.TgZ(23,"button",33)(24,"span",34),e._uU(25," Submit "),e.qZA(),e.TgZ(26,"span",35),e._uU(27," Please wait... "),e._UZ(28,"span",36),e.qZA()()()()}if(2&s){const t=e.MAs(1),i=e.oxw();e.xp6(8),e.uIk("aria-expanded",!i.isCollapsed1),e.xp6(3),e.Q6J("ngClass",e.VKq(6,P,!i.isCollapsed1)),e.xp6(1),e.Q6J("ngbCollapse",i.isCollapsed1),e.xp6(5),e.Q6J("ngModel",i.permissionModel.name),e.xp6(2),e.Q6J("ngIf",t.submitted&&t.invalid),e.xp6(4),e.uIk("data-kt-indicator",i.isLoading?"on":"off")}}let S=(()=>{class s{apiService;cdr;isCollapsed1=!1;isLoading=!1;permissions;datatableConfig={};reloadEvent=new e.vpe;permission$;permissionModel={id:0,name:""};noticeSwal;swalOptions={};constructor(t,i){this.apiService=t,this.cdr=i}ngAfterViewInit(){}ngOnInit(){this.datatableConfig={serverSide:!0,ajax:(t,i)=>{this.apiService.getPermissions(t).subscribe(n=>{console.log(n),i(n)})},columns:[{title:"Name",data:"name",render:(t,i,n)=>`<a href="javascript:;" data-action="view" data-id="${n.id}" class="text-gray-800 text-hover-primary mb-1">${t}</a>`},{title:"Assigned To",data:null,render:function(t,i,n){return Array.isArray(t.roles)?t.roles.map(function(o){return`<a href="#" class="badge fs-7 m-1 badge-light-${["info","success","warning","danger","primary"][Math.floor(5*Math.random())]}">${o.name}</a>`}).join(""):""},orderData:[1],orderSequence:["asc","desc"],type:"string"},{title:"Created Date",data:"created_at",render:function(t){return C()(t).format("DD MMM YYYY, hh:mm a")}}]}}delete(t){this.apiService.deletePermission(t).subscribe(()=>{this.reloadEvent.emit(!0)})}edit(t){this.permission$=this.apiService.getPermission(t),this.permission$.subscribe(i=>{this.permissionModel=i})}create(){this.permissionModel={id:0,name:""}}onSubmit(t,i){if(i&&i.invalid)return;this.isLoading=!0;const n={icon:"success",title:"Success!",text:this.permissionModel.id>0?"Permission updated successfully!":"Permission created successfully!"},o={icon:"error",title:"Error!",text:""},a=()=>{this.isLoading=!1};this.permissionModel.id>0?(()=>{this.apiService.updatePermission(this.permissionModel.id,this.permissionModel).subscribe({next:()=>{this.showAlert(n),this.reloadEvent.emit(!0)},error:p=>{o.text=this.extractText(p.error),this.showAlert(o),this.isLoading=!1},complete:a})})():(()=>{this.apiService.createPermission(this.permissionModel).subscribe({next:()=>{this.showAlert(n),this.reloadEvent.emit(!0)},error:p=>{o.text=this.extractText(p.error),this.showAlert(o),this.isLoading=!1},complete:a})})()}extractText(t){var i=[];for(var n in t)"string"==typeof t[n]?i.push(t[n]):"object"==typeof t[n]&&(i=i.concat(this.extractText(t[n])));return Array.from(new Set(i)).join("\n")}showAlert(t){let i=t.icon?.toString()||"success";"error"===t.icon&&(i="danger"),this.swalOptions=Object.assign({buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-"+i}},t),this.cdr.detectChanges(),this.noticeSwal.fire()}ngOnDestroy(){}static \u0275fac=function(i){return new(i||s)(e.Y36(b.$),e.Y36(e.sBO))};static \u0275cmp=e.Xpm({type:s,selectors:[["app-permission-listing"]],viewQuery:function(i,n){if(1&i&&e.Gf(Z,5),2&i){let o;e.iGM(o=e.CRH())&&(n.noticeSwal=o.first)}},decls:16,vars:4,consts:[[1,"card"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],["name","magnifier",1,"fs-3","position-absolute","ms-5"],["type","text","data-action","filter","placeholder","Search Users",1,"form-control","form-control-solid","w-250px","ps-12"],[1,"card-toolbar"],[1,"d-flex","justify-content-end"],["type","button","data-action","create",1,"btn","btn-primary"],[1,"card-body","pt-0"],["route","/apps/users",3,"datatableConfig","reload","modal","deleteEvent","editEvent","createEvent"],[3,"swalOptions"],["noticeSwal",""],["formModal",""],[3,"ngSubmit"],["myForm","ngForm"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["id","kt_modal_update_customer_scroll","data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-max-height","auto","data-kt-scroll-dependencies","#kt_modal_update_customer_header","data-kt-scroll-wrappers","#kt_modal_update_customer_scroll","data-kt-scroll-offset","300px",1,"d-flex","flex-column","scroll-y","me-n7","pe-7","mw-650px"],["data-bs-toggle","collapse","role","button","aria-controls","kt_modal_update_customer_user_info",1,"fw-bold","fs-3","rotate","collapsible","mb-7",3,"click"],[1,"ms-2","rotate-180"],[1,"ki-duotone","ki-down","fs-3",3,"ngClass"],[1,"collapse","show",3,"ngbCollapse","ngbCollapseChange"],["collapse1","ngbCollapse"],[1,"fv-row","mb-7"],[1,"required","fw-semibold","fs-6","mb-2"],["type","text","name","name","required","","minlength","4",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],["name","ngModel"],["class","fv-plugins-message-container fv-plugins-message-container--enabled invalid-feedback",4,"ngIf"],[1,"modal-footer","flex-center"],["type","reset","id","kt_modal_update_customer_cancel",1,"btn","btn-light","me-3",3,"click"],["type","submit","id","kt_modal_update_customer_submit",1,"btn","btn-primary"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[1,"fv-plugins-message-container","fv-plugins-message-container--enabled","invalid-feedback"],[4,"ngIf"]],template:function(i,n){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"app-keenicon",4)(5,"input",5),e.qZA()(),e.TgZ(6,"div",6)(7,"div",7)(8,"button",8),e._uU(9," Add Permissions "),e.qZA()()()(),e.TgZ(10,"div",9)(11,"app-crud",10),e.NdJ("deleteEvent",function(a){return n.delete(a)})("editEvent",function(a){return n.edit(a)})("createEvent",function(){return n.create()}),e.qZA()()(),e._UZ(12,"swal",11,12),e.YNc(14,w,29,8,"ng-template",null,13,e.W1O)),2&i){const o=e.MAs(15);e.xp6(11),e.Q6J("datatableConfig",n.datatableConfig)("reload",n.reloadEvent)("modal",o),e.xp6(1),e.Q6J("swalOptions",n.swalOptions)}},dependencies:[d.mk,d.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.wO,l.On,l.F,x.D,T.q,c._D,g.q1]})}return s})(),L=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275cmp=e.Xpm({type:s,selectors:[["app-permission-details"]],decls:2,vars:0,template:function(i,n){1&i&&(e.TgZ(0,"p"),e._uU(1,"permission-details works!"),e.qZA())}})}return s})(),k=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275mod=e.oAB({type:s});static \u0275inj=e.cJS({imports:[d.ez,l.u5,l.UX,f.Bz.forChild([{path:"",component:S},{path:":id",component:L}]),v.Z,_.m,c.Oz,c.XC,c.lQ,c.HK,g.ii.forChild()]})}return s})()}}]);